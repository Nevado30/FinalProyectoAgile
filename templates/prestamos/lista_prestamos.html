{% extends "base.html" %}

{% block content %}
<div class="container">
  <h1 class="page-title">Mis préstamos</h1>

  <div class="toolbar">
    <a class="btn btn-primary" href="{% url 'prestamos:crear' %}">Nuevo préstamo</a>
  </div>

  <div class="card table-card">
    <table class="table">
      <thead>
        <tr>
          <th>Persona</th>
          <th>Banco</th>
          <th>Monto total</th>
          <th>Cuotas</th>
          <th>Inicio</th>
          <th colspan="2"></th>
        </tr>
      </thead>
      <tbody>
        {% for pr in prestamos %}
          <tr>
            <td>{{ pr.persona.apellidos }}, {{ pr.persona.nombres }}</td>
            <td>{{ pr.banco }}</td>
            <td>{{ pr.monto_total }}</td>
            <td>{{ pr.cuotas_totales }}</td>
            <td>{{ pr.fecha_inicio|date:"d/m/Y" }}</td>
            <td class="table-actions">
              <a class="btn btn-secondary" href="{% url 'prestamos:pagos_por_prestamo' pr.id_prestamo %}">Ver pagos</a>
              <a class="btn btn-secondary" href="{% url 'prestamos:editar' pr.id_prestamo %}">Editar</a>
            </td>
            <td class="table-actions">
              <a class="btn btn-danger" href="{% url 'prestamos:eliminar' pr.id_prestamo %}">Eliminar</a>
            </td>
          </tr>
        {% empty %}
          <tr><td colspan="7">No hay préstamos registrados.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
